%
% linear_fromfkt.tex -- Formfunktion linearer Ansatz
%
% (c) 2024 Flurin BrechbÃ¼hler
%
\documentclass[tikz]{standalone}
\usepackage{amsmath}
\usepackage{times}
\usepackage{txfonts}
\usepackage{pgfplots}
\usepackage{csvsimple}

\usetikzlibrary{arrows,intersections,math}
\usetikzlibrary{shapes.misc, positioning}
\definecolor{darkred}{rgb}{0.8,0,0}
\definecolor{lightred}{rgb}{0.8,0.4,0.4}
\definecolor{darkpurple}{rgb}{0.6,0,0.6}
\definecolor{lightpurple}{rgb}{0.6,0.4,0.6}
\definecolor{darkblue}{rgb}{0,0,0.8}
\definecolor{lightblue}{rgb}{0.4,0.4,0.8}
\definecolor{darkgreen}{rgb}{0,0.6,0}
\definecolor{lightgreen}{rgb}{0.4,0.6,0.4}
\definecolor{darkyellow}{rgb}{0.2,0.4,0}
\definecolor{lightyellow}{rgb}{0.6,0.8,0.4}
\definecolor{darkorange}{rgb}{0.9,0.4,0}
\definecolor{lightorange}{rgb}{1,0.6,0.4}
\definecolor{darkgrey}{rgb}{0.3,0.3,0.3}
\definecolor{lightgrey}{rgb}{0.6,0.6,0.6}

\begin{document}
\def\skala{0.65}

\begin{tikzpicture}[>=latex,thick,scale=\skala]
    % Plots
        % a_n
    \draw[color=darkred,line width=1.4pt] plot[domain=-1.35:-1, scale=3, smooth]
    ({\x},{0});
    \draw[color=darkred,line width=1.4pt] plot[domain=-1:0, scale=3, smooth]
    ({\x},{(1-2*\x)*(\x+1)^2});
    \draw[color=darkred,line width=1.4pt] plot[domain=0:1, scale=3, smooth]
    ({\x},{(1+2*\x)*(1-\x)^2});
    \draw[color=darkred,line width=1.4pt] plot[domain=1:1.35, scale=3, smooth]
    ({\x},{0});
        % b_n
    \draw[color=lightred,line width=1.4pt] plot[domain=-1.35:-1, scale=3, smooth]
    ({\x},{0});
    \draw[color=lightred,line width=1.4pt] plot[domain=-1:0, scale=3, smooth]
    ({\x},{\x*(\x+1)^2});
    \draw[color=lightred,line width=1.4pt] plot[domain=0:1, scale=3, smooth]
    ({\x},{\x*(1-\x)^2});
    \draw[color=lightred,line width=1.4pt] plot[domain=1:1.35, scale=3, smooth]
    ({\x},{0});

    % x-Achse
    \draw[->] (-4.1,0) -- (4.4,0) coordinate[label={$x$}];
    \draw (3,-0.1) -- (3,0.1);
    \draw (-3,-0.1) -- (-3,0.1);
    \node at (-3,0) [below] {$x_{n-1}$};
    \node at ( 0,0) [below] {$x_n$};
    \node at ( 3,0) [below] {$x_{n+1}$};

    % y-Achse
    \draw[->] (0,{-0.1}) -- (0,{4.3})
    coordinate[label={right:$a_n(y)$}];
    \node at (-0.1,0.1) [left, inner sep=1pt, fill=white, rounded corners] {$0$};
    \draw (-0.1,3) -- (0.1,3);
    \node at (0,3) [left] {$1$};

    % Labels Formfkt.
    \node at (0, 3.5) [color=darkred, inner sep=1pt, fill=white, draw, rounded rectangle, stroke=none] {${a_n(x)}$};
    \node at (0, 1.0) [color=lightred, inner sep=1pt, fill=white, draw, rounded rectangle, stroke=none] {${b_n(x)}$};
\end{tikzpicture}

\end{document}