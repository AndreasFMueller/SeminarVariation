%
% linear_fromfkt.tex -- Formfunktion linearer Ansatz
%
% (c) 2024 Flurin BrechbÃ¼hler
%
\documentclass[tikz]{standalone}
\usepackage{amsmath}
\usepackage{times}
\usepackage{txfonts}
\usepackage{pgfplots}
\usepackage{csvsimple}

\usetikzlibrary{arrows,intersections,math}
\usetikzlibrary{shapes.misc, positioning}
\definecolor{darkred}{rgb}{0.8,0,0}
\definecolor{darkpurple}{rgb}{0.6,0,0.6}
\definecolor{darkblue}{rgb}{0,0,0.8}
\definecolor{darkgreen}{rgb}{0,0.6,0}
\definecolor{darkyellow}{rgb}{0.2,0.4,0}
\definecolor{darkorange}{rgb}{0.9,0.4,0}
\definecolor{darkgrey}{rgb}{0.3,0.3,0.3}

\begin{document}
\def\skala{0.65}

\begin{tikzpicture}[>=latex,thick,scale=\skala]
    % Plots
        % links
    \draw[color=darkred,line width=1.4pt] plot[domain=-1.35:-1, scale=3, smooth]
    ({\x},{0});
    \draw[color=darkred,line width=1.4pt] plot[domain=-1:0, scale=3, smooth]
    ({\x},{(-4*(-1-\x)*(0-\x))});
    \draw[color=darkred,line width=1.4pt] plot[domain=0:1.35, scale=3, smooth]
    ({\x},{0});

        % mitte
    \draw[color=darkpurple,line width=1.4pt] plot[domain=-1.35:-1, scale=3, smooth]
    ({\x},{0});
    \draw[color=darkpurple,line width=1.4pt] plot[domain=-1:0, scale=3, smooth]
    ({\x},{(2*(-1-\x)*(-0.5-\x))});
    \draw[color=darkpurple,line width=1.4pt] plot[domain=0:1, scale=3, smooth]
    ({\x},{(2*(0.5-\x)*(1-\x))});
    \draw[color=darkpurple,line width=1.4pt] plot[domain=1:1.35, scale=3, smooth]
    ({\x},{0});

        %rechts
    \draw[color=darkblue,line width=1.4pt] plot[domain=-1.35:0, scale=3, smooth]
    ({\x},{0});
    \draw[color=darkblue,line width=1.4pt] plot[domain=0:1, scale=3, smooth]
    ({\x},{(-4*(0-\x)*(1-\x))});
    \draw[color=darkblue,line width=1.4pt] plot[domain=1:1.35, scale=3, smooth]
    ({\x},{0});

    % x-Achse
    \draw[->] (-4.1,0) -- (4.4,0) coordinate[label={$x$}];
    \draw ( 3.0,-0.1) -- ( 3.0,0.1);
    \draw ( 1.5,-0.1) -- ( 1.5,0.1);
    \draw (-1.5,-0.1) -- (-1.5,0.1);
    \draw (-3.0,-0.1) -- (-3.0,0.1);
    \node at (-3.0,0) [below] {$x_{n-2}$};
    \node at (-1.5,0) [below] {$x_{n-1}$};
    \node at ( 0.0,0) [below] {$x_n$};
    \node at ( 1.5,0) [below] {$x_{n+1}$};
    \node at ( 3.0,0) [below] {$x_{n+2}$};

    % y-Achse
    \draw[->] (0,{-0.1}) -- (0,{4.3})
    coordinate[label={right:$a_n(y)$}];
    \node at (-0.1,0) [left, inner sep=1pt, fill=white] {$0$};
    \draw (-0.1,3) -- (0.1,3);
    \node at (0,3) [left] {$1$};

    % Funktionsbeschriftungen
    \node at (-1.5,3) [xshift = -0.3cm, yshift = 0.33cm, color=darkred, inner sep=1pt, fill=white, draw, rounded rectangle, stroke=none] {${b_{n-1}(x)}$};
    \node at (0,3) [yshift = 0.33cm, color=darkpurple, inner sep=1pt, fill=white, draw, rounded rectangle, stroke=none] {${a_{n}(x)}$};
    \node at (1.5,3) [xshift = 0.3cm, yshift = 0.33cm, color=darkblue, inner sep=1pt, fill=white, draw, rounded rectangle, stroke=none] {${b_{n+1}(x)}$};
\end{tikzpicture}

\end{document}